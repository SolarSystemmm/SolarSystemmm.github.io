<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://threejs.org/build/three.min.js"></script>
    <script src="https://threejs.org/examples/js/controls/OrbitControls.js"></script>
</head>

<body>
    <p id="egg" class="zI">
    </p>





    <style>
        body {
            height: 200vh;
        }

        #preloader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: rgba(0, 0, 0, 0.8);
        }

        .overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 9;
        }

        .disabled {
            /* pointer-events: none; */
            background: rgba(0, 0, 0, 0) !important;
        }

        .zI {
            z-index: 99 !important;
        }

        #egg {
            position: relative;
            transition: all 1s ease-in;
        }

        .deadstar {
            transition: all 1s ease-in;
            position: absolute;
            top: 0;
            left: 0;
        }

        .active-egg {
            position: static;
            transform: translateX(25%);
        }

        * {
            margin: 0;
            padding: 0;
        }

        p {
            margin: 0;
        }

        body {

            font-family: 'Roboto';
        }

        canvas {
            /* transition: all 1s ease-in; */
        }

        .loading {
            position: absolute;
            bottom: 5%;
            left: 50%;
            transform: translateX(-50%);
            transition: all 1s ease-in;
        }

        .percent {
            color: #c09669;
            font-size: 20px;
            font-family: sans-serif;
            font-weight: 400;
            text-align: center;
            margin-top: 15px;
        }

        .progress-bar {
            width: 406px;
            height: 21px;
            background: #111;
            border-radius: 13px;
            padding: 3px;
            box-sizing: border-box;
        }

        .progress {
            width: 10px;
            height: 15px;
            background: #c09669;
            border-radius: 13px;
        }
    </style>
    <script src="script.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r119/three.js"
        integrity="sha512-N5Z+KLrIeRjD6NODmfDTz8onfsVTGwPmExvMVuQrGV/Y1gjTiJ+j2OLxViDzpxGqVX158pwTeZm6XDrCveo1jQ=="
        crossorigin="anonymous"></script>
    <script src="https://threejs.org/examples/js/controls/OrbitControls.js"></script>

    <script>
        var camera, scene, renderer, controls, stats, innerSphere;
        let rotationFactorY = 0.1
        let rotationFactorX = 0.1
        let maxRotationSpeed = 0.1

        init();
        animate();

        function init() {

            renderer = new THREE.WebGLRenderer({
                antialias: true,
                alpha: true
            });
            renderer.setPixelRatio(window.devicePixelRatio);
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.domElement.className = 'deadstar';
            const deadstar_contain = document.getElementById('egg')
            deadstar_contain.appendChild(renderer.domElement);

            scene = new THREE.Scene();

            camera = new THREE.PerspectiveCamera(60, innerWidth / innerHeight, 1, 1000);
            camera.position.set(0, 0, 10);
            scene.add(camera);

            controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.minPolarAngle = 1.5
            controls.maxPolarAngle = 1.5
            controls.enableDamping = true
            controls.minDistance = 250.0;
            controls.maxDistance = 250.0;
            controls.rotateSpeed = 1.5
            controls.update();


            let light1 = new THREE.DirectionalLight(0xffffff, 1.5);
            light1.position.y = window.innerHeight / 2;
            light1.position.z = window.innerHeight / 3;
            camera.add(light1);

            renderer.domElement.addEventListener('mouseup', rotating, false);
            var tex = new THREE.TextureLoader().load(
                "https://solarsystemmm.github.io/3D/texture-moon.png"
            );
            tex.minFilter = THREE.LinearFilter;

            var sphereGeom = new THREE.SphereBufferGeometry(0.7, 32, 32);

            innerSphere = new THREE.Mesh(
                sphereGeom,
                new THREE.MeshLambertMaterial({
                    map: tex,
                })
            );
            innerSphere.scale.set(4, 4.5, 4);
            scene.add(innerSphere);

            // renderer.domElement.addEventListener('click', rotating)
            window.addEventListener('resize', function (event) {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();

                renderer.setSize(window.innerWidth, window.innerHeight);
            });
        }


        async function rotating(e) {
            console.log(e)
            rotationFactorY = 0.2 * (e.clientX - window.innerWidth / 2) / window.innerWidth
            
            console.log(rotationFactorY)

        }


        function animate() {
            innerSphere.rotation.y += maxRotationSpeed * rotationFactorY;

            setTimeout(function () {

                requestAnimationFrame(animate);

            }, 1000 / 800);
            controls.update();

            renderer.render(scene, camera);

        }
    </script>
</body>


</html>